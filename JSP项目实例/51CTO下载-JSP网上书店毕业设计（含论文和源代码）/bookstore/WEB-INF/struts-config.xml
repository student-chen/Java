<?xml version="1.0" encoding="ISO-8859-1" ?>
	
<!DOCTYPE struts-config PUBLIC
          "-//Apache Software Foundation//DTD Struts Configuration 1.2//EN"
          "http://struts.apache.org/dtds/struts-config_1_2.dtd">
          
<struts-config>

	<data-sources>
		<data-source key="oracleDB1" type="org.apache.commons.dbcp.BasicDataSource">
			<set-property property="driverClassName"	
				value="oracle.jdbc.driver.OracleDriver" />
			<set-property property="url"
				value="jdbc:oracle:thin:@127.0.0.1:1521:ZGYDB" />
			<set-property property="maxActive"
				value="5"/>
			<set-property property="username"
				value="jenny"/>
			<set-property property="password"
				value="888888"/>
			<set-property property="autoCommit"
				value="true"/>
		</data-source>
	</data-sources>


	<form-beans>
		<form-bean name="loginForm" 
			type="org.apache.struts.action.DynaActionForm">
			<form-property name="username" type ="java.lang.String"/>
			<form-property name="password" type ="java.lang.String"/>
		</form-bean>
		
		<form-bean name="userForm" 
			type="org.apache.struts.validator.DynaValidatorForm">
			<form-property name="username" type ="java.lang.String"/>
			<form-property name="password" type ="java.lang.String"/>
			<form-property name="password2" type ="java.lang.String"/>
			<form-property name="name" type ="java.lang.String"/>
			<form-property name="tel" type ="java.lang.String"/>
			<form-property name="address" type ="java.lang.String"/>
			<form-property name="email" type ="java.lang.String"/>
		</form-bean>
		
		<form-bean name="bookIdForm" 
			type="org.apache.struts.action.DynaActionForm">
			<form-property name="bookId" type ="java.lang.Integer"/>
		</form-bean>
		
		<form-bean name="bookCatIdForm" 
			type="org.apache.struts.action.DynaActionForm">
			<form-property name="bookCatId" type ="java.lang.Integer"/>
		</form-bean>
		
		<form-bean name="pageIdForm" 
			type="org.apache.struts.action.DynaActionForm">
			<form-property name="pageId" type ="java.lang.Integer"/>
		</form-bean>
		
		<form-bean name="bookShopCartForm" 
			type="org.apache.struts.action.DynaActionForm">
			<form-property name="count" type ="java.lang.Integer[]"/>
			<form-property name="del" type ="java.lang.Integer[]"/>
		</form-bean>
		
		<form-bean name="bookSearchForm" 
			type="org.apache.struts.action.DynaActionForm">
			<form-property name="mode" type ="java.lang.Integer"/>
			<form-property name="bookCatId" type ="java.lang.Integer"/>
			<form-property name="key" type ="java.lang.String"/>
			<form-property name="field" type ="java.lang.String"/>
		</form-bean>
		
		<form-bean name="deliveryForm" 
			type="org.apache.struts.action.DynaActionForm">
			<form-property name="deliv" type ="java.lang.String"/>
			<form-property name="payment" type ="java.lang.String"/>
		</form-bean>
		
		<form-bean name="orderIdForm" 
			type="org.apache.struts.action.DynaActionForm">
			<form-property name="orderId" type ="java.lang.Integer"/>
		</form-bean>
		
		
	</form-beans>

	<global-forwards>
		<forward name="toBookMain" path="/bookMain.jsp"/>
		<forward name="toBookDetail" path="/bookShow.jsp"/>
		<forward name="toWrong" path="/wrong.jsp"/>
		<forward name="toLogin" path="/userLogin.jsp"/>
		<forward name="toBookShopCart" path="/bookShopCart.jsp"/>
		<forward name="toOrderAddress" path="/orderAddress.jsp"/>
		<forward name="toOrderConfirm" path="/orderConfirm.jsp"/>
		<forward name="toOrderHistory" path="/orderHistory.jsp"/>
		
	</global-forwards>

	<action-mappings>
		<action path="/bookSearch" type="BookStore.BookSearchAction" name="bookSearchForm" scope="request"  input="/wrong.jsp" />
		<action path="/bookDetail" type="BookStore.BookDetailAction" name="bookIdForm" scope="request"  input="/wrong.jsp" />
		<action path="/bookPage" type="BookStore.PageCtrlAction" name="pageIdForm" scope="request"  input="/wrong.jsp" />
		<action path="/login" type="BookStore.LoginAction" name="loginForm" scope="request"  input="/wrong.jsp" />
		<action path="/regist" type="BookStore.RegistAction" name="userForm" scope="request" validate="true"  input="/wrong.jsp" />
		<action path="/bookBuy" type="BookStore.BookBuyAction" name="bookIdForm" scope="request" input="/wrong.jsp" />
		<action path="/updateShopCart" type="BookStore.UpdateShopCartAction" name="bookShopCartForm" scope="request" input="/wrong.jsp" />
		<action path="/clearShopCart" type="BookStore.ClearShopCartAction" input="/wrong.jsp" />
		<action path="/addrConfirm" type="BookStore.AddrConfirmAction" name="deliveryForm" scope="request" input="/wrong.jsp" />
		<action path="/orderHistory" type="BookStore.OrderHistoryAction" input="/wrong.jsp" />
		<action path="/delOrder" type="BookStore.OrderDelAction" name="orderIdForm" scope="request" input="/wrong.jsp" />

	</action-mappings>
	
	<message-resources parameter="MyResource"/>	

	<controller processorClass="BookStore.MyRequestProcessor" />	
 	
  	<plug-in  className="org.apache.struts.validator.ValidatorPlugIn">
       <set-property 
        	property="pathnames" 
        	value="/WEB-INF/validator-rules.xml,/WEB-INF/validation.xml"/>
  		<set-property property="stopOnFirstError" value="false"/>
   </plug-in>
	
</struts-config>
